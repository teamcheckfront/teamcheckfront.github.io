jQuery(document).ready(function ($) {
    $(".mega-menu > ul > li").each(function(){
        if($(this).children(".last-content").size()>0){
           $(this).children(".sub-menu-wrap").append($(this).children(".last-content"))           
        }
         if($(this).children(".alt-html").size()>0){
            $(this).children(".sub-menu-wrap").find(".sub-menu-holder").append($(this).find(".alt-html").html())                   
        }
    })
    
    $(".sub-menu-wrap-lv-0 > .sub-menu-wrap-inner > .sub-menu li").hover(function(){
        var _t = $(this);
        var _placeholder= _t.parents(".sub-menu-wrap-lv-0").find(".sub-menu-holder");
         
        if(_t.children(".alt-html").size()>0){
            _placeholder.html(_t.children(".alt-html").html());
           
        }else{
             _placeholder.html(_t.children(".alt-html").html());
        }
       
    },function(){
        var _t = $(this);
        var _placeholder= _t.parents(".sub-menu-wrap-lv-0").find(".sub-menu-holder");
        if(_t.children(".alt-html").size()>0){
            _placeholder.html(_t.children(".alt-html").html());
        }
    })
    
    $(".menu-lv-0").each(function(){
        var a = $(this).children(a);
        $(this).find(".sub-menu-wrap-lv-0").prepend('<p class="mobile-only back-bt"><i class="_icon2020-arrow_up" aria-hidden="true"></i>'+a.find(".link-title").html()+'</p>')
    })
    
    $(".mega-menu > ul li").each(function(index){
        var t = 2;
        if($(this).hasClass('menu-lv-0')){
          $(this).attr("tabindex",t+index);   
        }else{
           $(this).children("a").attr("tabindex",t+index);   
        }        
    })       
    $(".mega-menu > ul > li").focus(function(){
        $(".mega-menu > ul > li").removeClass("focusing");
        $(this).addClass("focusing");
    })
    $(document).click(function(e) {
        var target = e.target;
        if (!$(target).is('.mega-menu') && !$(target).parents().is('.mega-menu')) {
            $(".mega-menu > ul > li").removeClass("focusing");
        }
    });
    $(document).keydown(function(e){
        var target = e.target;
        var code = e.keyCode || e.which;
        if (code == '9') {
            if (!$(target).is('.mega-menu') && !$(target).parents().is('.mega-menu')) {
                $(".mega-menu > ul > li").removeClass("focusing");
            }
        }
    });
  
    $(".mega-menu > ul > li li a").click(function(){
        if($(this).parent("li").find(".sub-menu-wrap").size()>0){
         $(this).parent("li").toggleClass("slide-submenu");
            $(document.body).trigger("menu-open");
         return false;
        }
     })
    $(".mega-menu .mobile-collapse dt").click(function(){
        //if($(this).parent(".mobile-collapse").find(".sub-menu-wrap").size()>0){
         $(this).parent(".mobile-collapse").toggleClass("slide-submenu");
         $(this).parents(".main-top-menu").toggleClass("slide-submenu-3");
         $(document.body).trigger("menu-open");
         return false;
        //}
     })
     $(".mega-menu > ul > li > a").click(function(){
         
        if($(this).parent("li").find(".sub-menu-wrap").size()>0){
        $(this).parent("li").addClass("slide-submenu");
        $(this).parents("ul").addClass("slide-main-submenu");
         $(document.body).trigger("menu-open");     
            if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || isIpadOS()) {
                return false;
            }
        }
       
     })
    
     $(document).on("click",".back-bt",function(){
         $(this).parent().parent("li").removeClass("slide-submenu");
         $(".mega-menu > ul").removeClass("slide-main-submenu");
     })
     $(document).on("click",".back-sub-link",function(){
         $(this).parents(".mobile-collapse").removeClass("slide-submenu");
         $(".mega-menu > ul").removeClass("slide-submenu-3");
     })
    $(".navi-mobile-bt").click(function(e){
        e.preventDefault();
        $(".mega-menu > ul").removeClass("slide-submenu-3");
         $(".mega-menu > .slide-main-submenu").removeClass("slide-main-submenu");   
        $(".mega-menu  .slide-submenu").removeClass("slide-submenu");
        $(".mega-menu").toggleClass("open");
        if($(".mega-menu > .slide-main-submenu").size()>0){
                   
        }
        if($(".mega-menu  .slide-submenu").size()>0){
             
        }
        if($(".mega-menu  .slide-submenu-3").size()>0){
             
        }
        $(document).trigger("menu-open");
        $(this).toggleClass("close")
    })
    
   
	
	var _url = window.location.href;
	$(".sub-menu-wrap-lv-0 > .sub-menu-wrap-inner > .sub-menu li li a").each(function(){
		var _curl = $(this).attr("href");
		_url = _url.replace("staging2.","");
		_url = _url.replace("qa.","");
		if (typeof _curl !== typeof undefined && _curl !== false) {
		  if(_url==_curl){
			  $(this).addClass("active-link");
		  }	
		}
	})
})
function isIpadOS() {
  return navigator.maxTouchPoints &&
    navigator.maxTouchPoints > 2 &&
    /MacIntel/.test(navigator.platform);
}

jQuery(window).load(function(){
    jQuery("header").focus();
})

function no_link(){
    jQuery("a").each(function(){
        var _t = jQuery(this);
        var flag = 10;
        if(_t.hasClass("link-disabled")){            
            flag = 11;
        }
        if (typeof _t.attr("href") === typeof undefined && _t.attr("href") === false) {            
            flag = 11;
        }
        if (typeof _t.attr("href") !== typeof undefined && _t.attr("href") !== false) {
            if(_t.attr("href")=="#"){             
                flag = 11;
            }
        }
        if(_t.parent().hasClass("nolink")){
            
            flag = 11;
        }
        if(flag == 10){
          _t.attr("role","button");  
        }else{
            _t.removeAttr("tabindex");
            _t.attr("aria-label","nolinks");
        }
    })
}

(function() {

		// Optimization for Repeat Views
		if( sessionStorage.fontsLoadedCriticalFoftDataUriPolyfill ) {
			document.documentElement.className += " fonts-ready";
			return;
		}

		// FontFaceObserver https://github.com/bramstein/fontfaceobserver
		(function(){function e(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function t(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t),e()}):document.attachEvent("onreadystatechange",function n(){if("interactive"==document.readyState||"complete"==document.readyState)document.detachEvent("onreadystatechange",n),e()})}function n(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function r(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+t+";"}function i(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t?(e.g=t,!0):!1}function s(t,n){function r(){var e=s;i(e)&&null!==e.a.parentNode&&n(e.g)}var s=t;e(t.b,r),e(t.c,r),i(t)}function o(e,t){var n=t||{};this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}function l(){if(null===a){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(t){}a=""!==e.style.font}return a}function c(e,t){return[e.style,e.weight,l()?e.stretch:"","100px",t].join(" ")}var u=null,a=null,f=null;o.prototype.load=function(e,i){var o=this,a=e||"BESbswy",l=i||3e3,h=(new Date).getTime();return new Promise(function(e,i){null===f&&(f=!!window.FontFace);if(f){var p=new Promise(function(e,t){function n(){(new Date).getTime()-h>=l?t():document.fonts.load(c(o,o.family),a).then(function(t){1<=t.length?e():setTimeout(n,25)},function(){t()})}n()}),d=new Promise(function(e,t){setTimeout(t,l)});Promise.race([d,p]).then(function(){e(o)},function(){i(o)})}else t(function(){function t(){var t;if(t=-1!=m&&-1!=g||-1!=m&&-1!=S||-1!=g&&-1!=S)(t=m!=g&&m!=S&&g!=S)||(null===u&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),u=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=u&&(m==x&&g==x&&S==x||m==T&&g==T&&S==T||m==N&&g==N&&S==N)),t=!t;t&&(null!==C.parentNode&&C.parentNode.removeChild(C),clearTimeout(L),e(o))}function f(){if((new Date).getTime()-h>=l)null!==C.parentNode&&C.parentNode.removeChild(C),i(o);else{var e=document.hidden;if(!0===e||void 0===e)m=p.a.offsetWidth,g=d.a.offsetWidth,S=v.a.offsetWidth,t();L=setTimeout(f,50)}}var p=new n(a),d=new n(a),v=new n(a),m=-1,g=-1,S=-1,x=-1,T=-1,N=-1,C=document.createElement("div"),L=0;C.dir="ltr",r(p,c(o,"sans-serif")),r(d,c(o,"serif")),r(v,c(o,"monospace")),C.appendChild(p.a),C.appendChild(d.a),C.appendChild(v.a),document.body.appendChild(C),x=p.a.offsetWidth,T=d.a.offsetWidth,N=v.a.offsetWidth,f(),s(p,function(e){m=e,t()}),r(p,c(o,'"'+o.family+'",sans-serif')),s(d,function(e){g=e,t()}),r(d,c(o,'"'+o.family+'",serif')),s(v,function(e){S=e,t()}),r(v,c(o,'"'+o.family+'",monospace'))})})},"undefined"!=typeof module?module.exports=o:(window.FontFaceObserver=o,window.FontFaceObserver.prototype.load=o.prototype.load)})();

		var fontProximaNova = new FontFaceObserver('Proxima Nova');
        var fontOrpheusPro = new FontFaceObserver('OrpheusPro');

		Promise.all([fontProximaNova.load(),fontOrpheusPro.load()]).then(function () {
			
            
            var fontIcomoon = new FontFaceObserver('icomoon');
			var fontOrpheusProNormal = new FontFaceObserver('OrpheusPro', {
					weight: "normal",
                    style: "normal"
				});
            var fontOrpheusProBold = new FontFaceObserver('OrpheusPro', {
					weight: "bold",
                    style: "normal"
				}); 
           
			
            var fontfontProximaNovaNormal = new FontFaceObserver('Proxima Nova', {
					weight: "normal",
                    style: "normal"
				}); 
             var fontfontProximaNovaBold = new FontFaceObserver('Proxima Nova', {
					weight: "bold",
                    style: "normal"
				});     
            
            var fontfontProximaNova600 = new FontFaceObserver('Proxima Nova', {
					weight: 600,
                    style: "normal"
				});    
          
			Promise.all([fontIcomoon.load(), fontOrpheusProNormal.load(), fontOrpheusProBold.load(), fontfontProximaNovaNormal.load(), fontfontProximaNovaBold.load(), fontfontProximaNova600.load()]).then(function () {
				document.documentElement.className += " fonts-ready";

				// Optimization for Repeat Views
				sessionStorage.fontsLoadedCriticalFoftDataUriPolyfill = true;
			});
		});
	})();
function loadStyleSheet(src) {
    if (document.createStyleSheet){
        document.createStyleSheet(src);
    }
    else {
        jQuery("head").append(jQuery("<link rel='stylesheet' href='"+src+"' type='text/css' media='screen' />"));
    }
};



