(window.klaviyoOnsiteJSONP=window.klaviyoOnsiteJSONP||[]).push([[7],{"../forms/src/Client/Components/FormComponents/Label.tsx":function(e,t,o){"use strict";var n=o("../../node_modules/@babel/runtime/helpers/extends.js"),r=o.n(n),i=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),s=o.n(i),l=o("../../node_modules/preact/compat/dist/compat.module.js"),a=o("../forms/src/Client/Components/ResetElements/index.tsx");const d=["children","theme","style"];t.a=e=>{let{children:t,theme:o,style:n}=e,i=s()(e,d);return t?l.default.createElement(a.g,r()({style:Object.assign({color:o.inputStyles.textStyles.color,fontFamily:o.inputStyles.textStyles.fontFamily,fontSize:o.inputStyles.textStyles.fontSize,fontWeight:o.inputStyles.textStyles.labelFontWeight,letterSpacing:o.inputStyles.textStyles.letterSpacing,paddingBottom:6},n)},i),t):null}},"../forms/src/Client/Components/FormComponents/ValidationMessage.tsx":function(e,t,o){"use strict";o("../../node_modules/core-js/modules/es6.regexp.replace.js");var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),i=o("../../node_modules/goober/dist/goober.esm.js"),s=o("../forms/src/Client/Components/ResetElements/index.tsx"),l=o("../forms/src/Client/formValidation/isRequired.ts"),a=o("../forms/src/Client/formValidation/email.ts"),d=o("../forms/src/Client/formValidation/date.ts"),c=o("../forms/src/Client/formValidation/phoneNumber.ts"),m=o("../forms/src/Constants/components.ts"),u=o("../forms/src/ClientStore/index.ts");let f,p=e=>e;t.a=({formVersionCId:e,componentInstance:t,componentAriaID:o,theme:b})=>{const g=Object(r.c)(t=>u.q.getFormVersionFormTypeDirection(t,u.u.getOpenFormVersionFormVersionId(t,e))),h=!(null==g||!g.startsWith("BOTTOM")),y=b.inputStyles.textStyles.errorColor;return n.default.createElement(s.b,{style:{width:"100%",position:"relative"}},(null==t?void 0:t.validationErrorType)&&n.default.createElement(s.b,{style:Object.assign({backgroundColor:"white",position:"absolute",zIndex:1,right:0,borderRadius:4,animation:"klaviyo-fadein 0.4s"},h?{bottom:47}:{top:9})},n.default.createElement(s.b,{className:Object(i.a)(f||(f=p`
&& {
              &&& {
                &::after {
                  content: '';
                  display: block;
                  position: absolute;
                  width: 0;
                  height: 0;
                  border-style: solid;
                  left: 8px;
                  border-width: 8px;
                  ${0}
                }
                &::before {
                  content: '';
                  display: block;
                  position: absolute;
                  width: 0;
                  height: 0;
                  border-style: solid;
                  border-width: 9px;
                  left: 7px;
                  ${0};
                }
              }
            }
`),h?"bottom: -15px;\n                  border-color: rgb(248, 236, 233) transparent transparent transparent;":"top: -15px;\n                  border-color: transparent transparent rgb(248, 236, 233) transparent;",h?`bottom: -17px;\n                    border-color: ${y} transparent transparent transparent;`:`top: -17px;\n                    border-color: transparent transparent ${y} transparent;`),style:{borderRadius:4,boxShadow:"1px 1px 4px 0 rgba(0, 0, 0, 0.26)",border:"1px solid "+b.inputStyles.textStyles.errorColor,backgroundColor:"rgb(248, 236, 233)"}},n.default.createElement(s.i,{style:{fontSize:14,padding:8,fontFamily:b.inputStyles.textStyles.fontFamily,color:b.inputStyles.textStyles.errorColor},role:"alert",id:o},(({validationErrorType:e,metadata:t})=>{var o;switch(e){case l.b:return"This field is required";case a.b:return"Please enter a valid email address";case d.b:return`Please enter a valid date format (${null==(o=m.e.find(({value:e})=>JSON.stringify(e)===JSON.stringify(null==t?void 0:t.format)))?void 0:o.label.replace(/ /g,(null==t?void 0:t.delimiter)||"/")})`;case c.b:return"Please enter a valid phone number";default:return""}})(t)))))}},"../forms/src/Client/Components/Modal/Modal.tsx":function(e,t,o){"use strict";o.r(t);o("../../node_modules/core-js/modules/es6.regexp.to-string.js"),o("../../node_modules/core-js/modules/es6.array.iterator.js"),o("../../node_modules/core-js/modules/web.dom.iterable.js");var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),i=o("../forms/src/Constants/defaultTheme/view.ts"),s=o("../forms/src/Constants/formTypes.ts"),l=o("../forms/src/Constants/designer.ts"),a=o("../forms/src/Constants/views.ts");var d=o("../../node_modules/lodash-es/uniqueId.js"),c=o("../../node_modules/goober/dist/goober.esm.js"),m=o("../forms/src/Client/Components/View/index.ts"),u=o("../forms/src/Client/Components/View/Canned/ErrorView.tsx"),f=o("../../node_modules/@babel/runtime/helpers/extends.js"),p=o.n(f),b=o("../../node_modules/lodash-es/merge.js"),g=o("../forms/src/ClientStore/index.ts"),h=o("../forms/src/Client/Components/ResetElements/index.tsx"),y=o("../forms/src/Constants/defaultTheme/clientThemeConstants.ts");const I=()=>null;var C=({formVersionId:e,onClick:t})=>{var o;const i=Object(r.b)(),[s,a]=Object(n.useState)(!1),d=!!Object(r.c)(g.n.getXButtonActive),c=Object(r.c)(g.e.isDesignWorkflow),m=y.a.dismiss,u=null==(o=Object(r.c)(t=>g.q.getFormVersionDataStyling(t,e)))?void 0:o.dismissButtonStyles,f=Object(b.a)({},m,u),C=f.size,v=s||d;return n.default.createElement(n.default.Fragment,null,v&&n.default.createElement(I,{size:C,isSelected:d,$margin:f.margin}),n.default.createElement(h.k,p()({width:C,height:C,tabIndex:0,alt:"Close form",style:{right:0,top:0,position:"absolute",zIndex:6,cursor:"pointer",height:C+"px",width:C+"px",marginRight:f.margin.right+"px",marginTop:f.margin.top+"px"},className:c?"":"klaviyo-close-form",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:t,"aria-describedby":"close-form"},c&&{onClick:()=>{i(g.n.slice.actions.setActiveSidebar({type:l.d}))},onMouseOver:()=>{a(!0)},onMouseLeave:()=>a(!1)}),n.default.createElement("title",{id:"close-form"},"Close form"),n.default.createElement("circle",{style:{cursor:"pointer"},cx:"10",cy:"10",r:"9.5",fill:f.backgroundColor,stroke:f.borderColor}),n.default.createElement("path",{style:{cursor:"pointer"},d:"M6 6L14 14M6 14L14 6L6 14Z",stroke:f.xColor,strokeWidth:f.xStroke,strokeLinecap:"round",strokeLinejoin:"round"})))},v=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),x=o.n(v);const S=["formType","formTypeDirection"],j={LEFT:"slideinleft",TOP_CENTER:"slideinup",BOTTOM_CENTER:"slideindown",RIGHT:"slideinright"},O=({formType:e,formTypeDirection:t})=>{const o=e===s.f?"fadein":j[Object.keys(j).find(e=>t&&t.endsWith(e))];return{animationDuration:e===s.f?"0.5s":"1.5s",animationName:"klaviyo-"+o,animationTimingFunction:"ease",animationPlayState:"running",animationDelay:"0s",animationIterationCount:1,animationDirection:"normal",animationFillMode:"none"}},w=({formTypeDirection:e,modalScale:t})=>{const o={TOP:{top:0},CENTER:{top:"50%",transform:`scale(${t}) translateY(-50%)`,marginTop:"auto",marginBottom:"auto"},BOTTOM:{bottom:0}},n={LEFT:{left:0},CENTER:{left:"50%",transform:`scale(${t}) translateX(-50%)`,marginLeft:"auto",marginRight:"auto"},RIGHT:{right:0}};return Object.assign({},o[Object.keys(o).find(t=>e&&e.startsWith(t))],n[Object.keys(n).find(t=>e&&e.endsWith(t))])},E=e=>{let{formType:t,formTypeDirection:o}=e,r=x()(e,S);return n.default.createElement(h.b,p()({},r,{style:O({formType:t,formTypeDirection:o})}))};var k=o("../forms/src/Utils/isMobile.ts");var T=()=>window.matchMedia("(orientation: landscape)").matches;var V=(e,t)=>{var o,n;let r=e.formType===s.e&&[s.c,s.b].includes(null==(o=e.data)||null==(n=o.flyoutOptions)?void 0:n.docking);Object(k.a)()&&T()&&(r=!1);let i=e.formTypeDirection||null;var l,a;r&&t&&(i=(null==(l=e.data)||null==(a=l.flyoutOptions)?void 0:a.docking)===s.c?s.g:s.a);return{isDocked:r&&t,evaluatedFormTypeDirection:i}};let _,F=e=>e;var A=({closePortal:e,formVersionCId:t,style:o})=>{var a,f;const p=Object(r.c)(e=>g.u.openFormVersionSelectById(e,t)),b=Object(r.c)(e=>g.q.formVersionSelectById(e,p.formVersionId)),y=Object(r.c)(e=>g.q.getFormVersionDismissalConfig(e,b.formVersionId)),I=Object(r.c)(g.n.getMobileDesktopType),v=Object(r.c)(g.e.isDesignWorkflow),x=Object(r.c)(g.u.getTopModalCId),S=Object(r.c)(e=>g.B.getViewDataStylingBorderRadius(e,p.currentViewId)),j=Object(r.c)(e=>g.B.getViewDataStylingDropShadow(e,p.currentViewId)),[O,w]=Object(n.useState)(),T=Object(n.useRef)(null);Object(n.useEffect)(()=>{w(Object(d.a)("modal_animation_key"))},[b.formType,b.formTypeDirection,I]),Object(n.useEffect)(()=>{const o=o=>{var n,r,i;null!=(n=T.current)&&n.contains(o.target)||v||t!==x||null===e||(r=b.formType,void 0!==(i=y)&&r===s.f&&(Object(k.a)()?!0===(null==i?void 0:i.mobile):!0===(null==i?void 0:i.desktop)))||e()};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o)}},[v,t,x,e,y]);const{isDocked:A,evaluatedFormTypeDirection:$}=V(b,v?I===l.e:Object(k.a)()),D=null==(a=b.data)||null==(f=a.styling)?void 0:f.margin;return O?n.default.createElement(h.b,{ref:T,style:Object.assign({},o,{borderRadius:(S||i.a.theme.borderRadius)+"px",position:"relative",outline:0,display:"flex",justifyContent:"center",flex:"0 0 auto"},b.formType===s.f?{alignSelf:"center"}:{}),"data-testid":I},n.default.createElement(n.Suspense,{fallback:n.default.createElement(h.b,null)},n.default.createElement(E,{key:O,formType:b.formType,formTypeDirection:$,"data-testid":b.formType},(N=n.default.createElement(h.b,{style:Object.assign({},j&&j.enabled?{boxShadow:`0px 0px ${j.blur}px ${j.color}`}:{},S?{borderRadius:S+"px"}:{})},n.default.createElement(h.b,{style:{position:"relative",display:"flex"}},n.default.createElement(C,{formVersionId:p.formVersionId,onClick:e}),p.showErrorView?n.default.createElement(u.a,null):n.default.createElement(m.a,{formVersionCId:t,formVersionId:p.formVersionId,viewId:p.currentViewId,isDocked:A,formTypeDirection:$}))),A?N:n.default.createElement(h.b,{className:Object(c.a)(_||(_=F`
&& {
            &&& {
              &::before {
                content: '';
                display: block;
                height: ${0}px;
                width: 100%;
              }
              &::after {
                content: '';
                display: block;
                height: ${0}px;
                width: 100%;
              }
            }
          }
`),(null==D?void 0:D.top)||0,(null==D?void 0:D.bottom)||0),style:{position:"relative",flexDirection:"column",display:"flex",marginLeft:null==D?void 0:D.left,marginRight:null==D?void 0:D.right}},N))))):null;var N},$=o("../forms/src/Utils/calculateSideImageSize.ts");t.default=({formVersionCId:e,closePortal:t,className:o})=>{var d,c,m,u;const f=Object(r.c)(t=>g.u.openFormVersionSelectById(t,e)),p=Object(r.c)(e=>g.q.formVersionSelectById(e,f.formVersionId));let b=Object(r.c)(e=>g.B.getViewDataStylingSize(e,f.currentViewId))||i.a.theme.size;const y=Object(r.c)(e=>g.q.getFormVersionSideImage(e,f.formVersionId)),I=null==y||null==(d=y.data)||null==(c=d.styling)?void 0:c.sizeMultiplier,C=I?Object($.a)(I,b):0,v=Object(r.c)(g.e.isDesignWorkflow),x=Object(r.c)(g.n.getMobileDesktopType),S=x===l.e&&v,j=Object(r.c)(g.n.getDesignerType)===l.g,{isDocked:O,evaluatedFormTypeDirection:E}=V(p,v?x===l.e:Object(k.a)());(Object(k.a)()||S)&&y&&!y.displayOnMobile&&(b-=C);const T=null==(m=p.data)||null==(u=m.styling)?void 0:u.margin,_=O?0:(null==T?void 0:T.left)||0,F=O?0:(null==T?void 0:T.right)||0,D=Math.max(Math.min(parseInt(b.toString(),10),a.a),a.b)+F+_,N=Object(r.c)(e=>g.B.getViewDataStylingOverlayColor(e,f.currentViewId))||i.a.theme.overlayColor,R=Object(r.c)(e=>{var t;return null==(t=g.B.getViewDataStyling(e,f.currentViewId))?void 0:t.mobileOverlay})||i.a.theme.mobileOverlay,M=Object(r.c)(g.e.isFetchingForms),[W,B]=Object(n.useState)(1);Object(n.useEffect)(()=>{const e=()=>{const e=j?l.h:l.f,t=S?e:window.innerWidth,o=O?t/D:Math.min(t/D,1);B(o)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[D,x]);let H={display:"flex",zIndex:v?0:9e4};var P,L;H=x===l.e&&v?Object.assign({},H,{position:"relative",justifyContent:"center",alignItems:(P=p.formType,L=E,P===s.e&&L?L.startsWith("BOTTOM")?"flex-end":L.startsWith("CENTER")?"center":"flex-start":"center"),backgroundColor:p.formType===s.e?(null==R?void 0:R.enabled)&&(null==R?void 0:R.color)||"transparent":N,alignSelf:"center",height:"100%",width:j?"320px":"100%"}):p.formType===s.e?Object.assign({},H,Object.assign({maxHeight:v?"100%":100/W+"%",position:v?"absolute":"fixed",transform:`scale(${W})`,transformOrigin:`${E&&E.endsWith("RIGHT")?"right":"left"} ${E&&E.startsWith("BOTTOM")?"bottom":"top"}`,overflow:v?"initial":"visible"},w({formTypeDirection:E,modalScale:W}))):Object.assign({},H,{position:v?"initial":"fixed",left:0,top:0,width:"100%",height:"100%",justifyContent:"center",alignItems:v?"flex-start":"center",overflow:"auto",backgroundColor:N});let z={};x===l.e&&v?z=Object.assign({position:"absolute",transform:`scale(${W})`,transformOrigin:p.formType===s.e&&E?""+(E.startsWith("BOTTOM")?"bottom":"top"):"center",maxHeight:v?"100%":100/W+"%"},p.formType!==s.e||O||1!==W?{}:w({formTypeDirection:E,modalScale:W})):p.formType===s.f&&(z={overflow:v?"initial":"visible",transform:`scale(${W})`,transformOrigin:"center",maxHeight:v?"100%":100/W+"%"});return q=p.formType===s.e&&Object(k.a)()&&(null==R?void 0:R.enabled),U=n.default.createElement(h.b,{className:o||"",style:H},M?n.default.createElement(h.h,null,"Loading..."):n.default.createElement(A,{closePortal:t,formVersionCId:e,style:z})),q?n.default.createElement(h.b,{style:R&&R.enabled?{backgroundColor:null==R?void 0:R.color,height:"100%",width:"100%",left:0,top:0,position:"fixed",zIndex:9e4}:{}},U):U;var q,U}},"../forms/src/Client/Components/ResetElements/CleaveInput.tsx":function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var n=o("../../node_modules/@babel/runtime/helpers/extends.js"),r=o.n(n),i=o("../../node_modules/preact/compat/dist/compat.module.js"),s=o("../forms/src/Constants/components.ts");const l=i.default.lazy(()=>o.e(16).then(o.t.bind(null,"../../node_modules/cleave.js/react.js",7))),a=e=>i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null)},i.default.createElement(l,r()({},e,{className:`needsclick ${e.className} ${s.o}`})))},"../forms/src/Client/Components/ResetElements/index.tsx":function(e,t,o){"use strict";o.d(t,"b",(function(){return m})),o.d(t,"c",(function(){return u})),o.d(t,"a",(function(){return f})),o.d(t,"h",(function(){return p})),o.d(t,"e",(function(){return b})),o.d(t,"i",(function(){return g})),o.d(t,"j",(function(){return h})),o.d(t,"f",(function(){return y})),o.d(t,"d",(function(){return I})),o.d(t,"k",(function(){return C})),o.d(t,"g",(function(){return v}));var n=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),r=o.n(n),i=o("../../node_modules/@babel/runtime/helpers/extends.js"),s=o.n(i),l=o("../../node_modules/preact/compat/dist/compat.module.js"),a=o("../forms/src/Constants/components.ts");o("../forms/src/Client/client.scss");const d=["tabIndex","className","alt"],c=["tabIndex","className","style","alt"],m=l.default.forwardRef((e,t)=>l.default.createElement("div",s()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`}))),u=l.default.forwardRef((e,t)=>l.default.createElement("form",s()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`}))),f=l.default.forwardRef((e,t)=>l.default.createElement("button",s()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`}),e.children)),p=l.default.forwardRef((e,t)=>l.default.createElement("p",s()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`}))),b=l.default.forwardRef((e,t)=>l.default.createElement("img",s()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`}))),g=l.default.forwardRef((e,t)=>l.default.createElement("span",s()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`}))),h=l.default.forwardRef((e,t)=>l.default.createElement("svg",s()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`}))),y=l.default.forwardRef((e,t)=>l.default.createElement("input",s()({ref:t},e,{className:`notranslate needsclick ${e.className||""} ${a.o}`}))),I=e=>{let{tabIndex:t,className:o,alt:n}=e,i=r()(e,d);return l.default.createElement(f,{type:"button",tabIndex:t,className:o},l.default.createElement(b,s()({alt:n},i)))},C=e=>{let{tabIndex:t,className:o,style:n}=e,i=r()(e,c);return l.default.createElement(f,{tabIndex:t,className:o,style:n},l.default.createElement(h,s()({role:"img"},i),i.children))},v=l.default.forwardRef((e,t)=>l.default.createElement("label",s()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`})))},"../forms/src/Client/Components/View/Canned/ErrorView.tsx":function(e,t,o){"use strict";var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/src/Client/Components/ResetElements/index.tsx");t.a=({isEmbed:e=!1})=>n.default.createElement(r.b,{style:{width:e?"100%":450,height:165,display:"flex",justifyContent:"center",alignItems:"center",background:"#ffffff"}},n.default.createElement(r.b,{style:{textAlign:"center",width:300}},"An error occured when submitting. Please try again later."))},"../forms/src/Client/Components/View/index.ts":function(e,t,o){"use strict";o("../../node_modules/core-js/modules/es6.array.sort.js");var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),i=o("../forms/src/ClientStore/store.ts"),s=o("../forms/src/ClientStore/index.ts"),l=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),a=o.n(l),d=o("../forms/src/Constants/actions.ts"),c=(o("../../node_modules/core-js/modules/es6.regexp.to-string.js"),o("../forms/src/Utils/debug.ts"));class m{constructor({formVersionCId:e,actionId:t}){this.currentHandlerStep="INSTANTIATED",this.formActionType=void 0,this.actionId=void 0,this.formVersionCId=void 0,this.formAction=void 0,this.formId=void 0,this.companyId=void 0,this.actionId=t,this.formVersionCId=e,this.formAction=s.b.actionSelectById(i.a.getState(),t);const o=i.a.getState();this.formId=s.u.getOpenFormVersionFormId(o,e),this.companyId=s.e.getKlaviyoCompanyId(o)}runAction(){return this.currentHandlerStep="PREHANDLER",new Promise(e=>e()).then(e=>this.__preHandler(e)).then(e=>(this.currentHandlerStep="HANDLER",e)).then(e=>this.__handler(e)).then(e=>(this.currentHandlerStep="POSTHANDLER",e)).then(e=>this.__postHandler(e)).catch(e=>this.__errorHandler(e))}__preHandler(e){}__handler(e){}__postHandler(e){}__errorHandler(e){Object(c.a)(e.toString(),{formActionType:this.formActionType,currentHandlerStep:this.currentHandlerStep})}}const u=["isSubmit"];class f extends m{constructor(e){let{isSubmit:t}=e;super(a()(e,u)),this.isSubmit=void 0,this.isSubmit=t,this.formActionType=d.a}__handler(){return i.a.dispatch(s.u.closeForm({formVersionCId:this.formVersionCId,logMetric:!this.isSubmit}))}}f.formActionType=d.a;var p=f,b=o("../forms/src/Utils/errorTypes.ts"),g=o("../forms/src/Utils/promise.ts"),h=o("../forms/src/Utils/onsiteApi/learnq.ts"),y=o("../forms/src/ClientStore/logMetricAsync/actions.ts");var I=o("../forms/src/Constants/metrics.ts"),C=o("../../node_modules/unfetch/dist/unfetch.mjs"),v=o("../config/lib/client.json");const x=`${v.API.url}${v.API.submitToListPath}`;var S=o("../../node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),j=o("../forms/src/Sentry.tsx"),O=o("../forms/src/Utils/camelizeKeys.ts");const w=v.API.url+"/ajax/sms/subscribe_unique_id";var E=class extends m{constructor(e){super(e),this.hiddenFieldsComponentId=void 0,this.composedFields=void 0;const t=i.a.getState();this.hiddenFieldsComponentId=s.i.getComponentIdByActionId(t,e.actionId),this.composedFields=s.u.getComposedFields(t,this.formVersionCId,this.hiddenFieldsComponentId)}async __preHandler(){const e=await i.a.dispatch(s.u.validateOpenFormVersion({formVersionCId:this.formVersionCId}));if(Object(S.e)(e)){const{components:t}=e.payload;if(t.some(({valid:e})=>!e))throw new b.c({type:"form"})}return!0}__requestUniqueID(){(e=>{const t={method:"POST",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(Object(O.b)(e))};return Object(C.a)(w,t).then(e=>{if(e.status>=500)throw Error("Error sending request: "+e.url);return e}).then(e=>e.json()).then(e=>Object(O.a)(e))})({companyId:this.companyId,form_id:this.formId,email:this.composedFields.$email}).then(({data:{uniqueId:e}})=>{void 0!==e&&i.a.dispatch(s.e.slice.actions.setSmsSubscriptionUniqueId(e))}).catch(()=>{})}__errorHandler(e){const{composedFields:t,formId:o,companyId:n,formAction:r}=this;if(m.prototype.__errorHandler.call(this,e),(e=>[b.a,b.c].some(t=>e instanceof t))(e))throw e;i.a.dispatch(s.u.updateCurrentView({id:this.formVersionCId,changes:{showErrorView:!0}})),i.a.dispatch(Object(y.a)({metric:I.c,formId:o,companyId:n,submittedFields:t,listId:null==r?void 0:r.listId})),j.a.captureException(e,{tags:{onSubmit:!0},extra:{submitAction:!0,formId:this.formId,companyId:this.companyId}})}};var k=class extends E{__handler(){const e=i.a.getState();Object(h.a)(this.composedFields);const t=s.u.getSubscriptionOnlyComponentData(e,this.formVersionCId);return this.composedFields=Object.assign({},this.composedFields,t||{}),s.i.anyComponentHasSubscribeToSMSAction(e,s.u.getOpenFormVersionFormVersionId(e,this.formVersionCId))&&this.__requestUniqueID(),this.__submitToList()}__submitHandlerCheck({success:e,errors:t=[]}){const{composedFields:o,formId:n,companyId:r,formAction:l}=this;if(!e&&"List does not exist."!==t[0])throw i.a.dispatch(s.u.updateCurrentView({id:this.formVersionCId,changes:{showErrorView:!0}})),i.a.dispatch(Object(y.a)({metric:I.c,formId:n,companyId:r,submittedFields:o,listId:l.listId})),new b.a(t.join(" | "))}__submitToList(){const{composedFields:e,formId:t,companyId:o}=this;return(e=>Object(C.a)(x,{method:"POST",headers:{"Access-Control-Allow-Headers":"*","Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:e.toString()}))(this.__makePOSTBody({composedFields:e})).then(e=>e.json()).then(n=>n.success&&this.formAction.actionType?(i.a.dispatch(s.l.slice.actions.successForm({formId:t,successActionType:this.formAction.actionType})),Object(g.b)(200,i.a.dispatch(Object(y.a)({metric:I.h,logCustomEvent:!0,formId:t,companyId:o,submittedFields:e,action_type:"Submit Form"}))).then(()=>n).catch(()=>n)):n)}__makePOSTBody({composedFields:e}){const t=new Date,o=Object.assign({},e,"object"==typeof window.Shopify&&window.Shopify.shop?{services:JSON.stringify({shopify:{source:"form"}})}:{}),{$exchange_id:n}=Object(h.c)(),r=Object.assign({g:this.formAction.listId,$fields:Object.keys(o).toString(),$list_fields:Object.keys(o).filter(e=>Array.isArray(o[e])).toString(),$timezone_offset:-t.getTimezoneOffset()/60},o,n?{$exchange_id:n}:{}),i=new URLSearchParams;return Object.keys(r).forEach(e=>{const t=r[e];return Array.isArray(t)?t.forEach(t=>i.append(e,t)):i.set(e,t)}),i}};class T extends k{__postHandler({success:e,errors:t=[]}){return s.u.openFormVersionSelectIds(i.a.getState()).includes(this.formVersionCId)&&this.formAction.viewId?(this.__submitHandlerCheck({success:e,errors:t}),i.a.dispatch(s.u.updateCurrentView({id:this.formVersionCId,changes:{currentViewId:this.formAction.viewId}}))):null}}T.formActionType=d.f;var V=T;o("../../node_modules/core-js/modules/es6.regexp.replace.js");const _=["isSubmit"];class F extends m{constructor(e){var t,o;let{isSubmit:n}=e;super(a()(e,_)),this.redirectUrl=void 0,this.newWindow=void 0,this.isSubmit=void 0,this.redirectUrl=(null==(t=this.formAction.data)?void 0:t.redirectUrl)||"about:blank",this.newWindow=!(null==(o=this.formAction.data)||!o.newWindow)&&this.formAction.actionType===d.b,this.isSubmit=!!n,this.formActionType=d.b}__redirectUrl(){const e=this.redirectUrl.replace(/^javascript:/,"");if(this.newWindow&&this.formAction.actionType===d.b){const t=window.open(e,"_blank");null==t||t.focus()}else window.location.assign(e)}__handler(){const{formId:e,newWindow:t,formVersionCId:o}=this;this.formAction.actionType===d.b&&i.a.dispatch(s.l.slice.actions.successForm({formId:e,successActionType:d.b}));const n=s.u.getOpenFormVersionSentSubmitMetric(i.a.getState(),o),r=i.a.dispatch(Object(y.a)({metric:I.g,logTelemetric:!this.isSubmit&&!n,logCustomEvent:!0,formId:this.formId,companyId:this.companyId,action_type:"Go to URL",destination_url:this.redirectUrl}));return t?(this.__redirectUrl(),r):Object(g.b)(200,r).then(()=>this.__redirectUrl()).catch(()=>this.__redirectUrl())}}F.formActionType=d.b;var A=F;class $ extends k{__postHandler({success:e,errors:t=[]}){this.__submitHandlerCheck({success:e,errors:t});const{formVersionCId:o,actionId:n}=this;return new A({formVersionCId:o,actionId:n,isSubmit:!0}).runAction()}}$.formActionType=d.e;var D=$;class N extends k{__postHandler({success:e,errors:t=[]}){this.__submitHandlerCheck({success:e,errors:t});const{formVersionCId:o,actionId:n}=this;return new p({formVersionCId:o,actionId:n,isSubmit:!0}).runAction()}}N.formActionType=d.d;var R=N;const M=e=>"This form is now set to display on Mobile devices only and subscribers will be routed to the list set on the "+e.toLowerCase()+" keyword.",W=e=>e+" Keyword",B=e=>e+" Message";M("Opt-in"),W("Opt-in"),B("Opt-in"),M("Subscribe"),W("Subscribe"),B("Subscribe");class H extends m{constructor(e){var t,o,n;super(e),this.toPhoneNumber=void 0,this.optInMessage=void 0,this.optInKeyword=void 0,this.toPhoneNumber=null==(t=this.formAction.data)?void 0:t.toPhoneNumber,this.optInMessage=(null==(o=this.formAction.data)?void 0:o.optInMessage)||"Send this text to subscribe to SMS updates!",this.optInKeyword=(null==(n=this.formAction.data)?void 0:n.optInKeyword)||"JOIN",this.formActionType=d.g}__handler(){const e=s.e.getSmsSubscriptionUniqueId(i.a.getState()),t=function(e){return e&&6===e.length}(e)?`${this.optInKeyword}:${e}`:this.optInKeyword,o=`sms:${this.toPhoneNumber}?&body=${encodeURIComponent(`${this.optInMessage} (ref:${t})`)}`;i.a.dispatch(s.u.closeForm({formVersionCId:this.formVersionCId}));const n=i.a.dispatch(Object(y.a)({metric:I.i,logCustomEvent:!0,formId:this.formId,companyId:this.companyId,action_type:"Subscribe Via SMS",sms_keyword:this.optInKeyword,destination_url:o}));return Object(g.b)(200,n).then(()=>window.location.assign(o)).catch(()=>window.location.assign(o))}}H.formActionType=d.g;var P=H;class L extends E{__handler(){const{formVersionCId:e,formAction:t,composedFields:o,formId:n,companyId:r}=this,l=i.a.getState();if(!s.u.openFormVersionSelectIds(l).includes(e)||null==t||!t.viewId)return null;Object(h.a)(o);const a=s.u.getOpenFormVersionFormVersionId(l,e);s.i.anyComponentHasSubscribeToSMSAction(l,a)&&this.__requestUniqueID();return!!Object.keys(s.u.getInputComponentFields(l,e)).length&&s.i.shouldTriggerProfileSubmitMetric(l,a)&&i.a.dispatch(Object(y.a)({metric:I.h,logCustomEvent:!0,formId:n,companyId:r,submittedFields:o,action_type:"Submit Form"})),i.a.dispatch(s.u.updateCurrentView({id:e,changes:{currentViewId:t.viewId}}))}}L.formActionType=d.h;var z=L;const q={[p.formActionType]:p,[V.formActionType]:V,[z.formActionType]:z,[A.formActionType]:A,[R.formActionType]:R,[D.formActionType]:D,[P.formActionType]:P},U=({actionId:e,formVersionCId:t})=>{const o=i.a.getState(),n=s.b.getActionType(o,e),r=s.u.getInputComponentFields(o,t),l=r.$email||r.$phone_number;return n!==V.formActionType||l?q[n]:z};var K=o("../forms/src/Constants/designer.ts"),J=o("../forms/src/Constants/formTypes.ts"),Y=o("../forms/src/Constants/views.ts"),G=o("../../node_modules/@babel/runtime/helpers/extends.js"),X=o.n(G);o("../../node_modules/core-js/modules/es6.array.iterator.js"),o("../../node_modules/core-js/modules/web.dom.iterable.js");var Q=o("../../node_modules/lodash-es/merge.js"),Z=o("../forms/src/Constants/defaultTheme/formComponent.ts"),ee=o("../forms/src/Constants/components.ts");o("../forms/src/Client/Components/FormComponents/RichText/editorCSS.scss");const te=["html"];var oe=e=>{let{html:t}=e,o=a()(e,te);return n.default.createElement("div",X()({},t?{dangerouslySetInnerHTML:{__html:t}}:{},{style:{width:"100%"},className:`${ee.o} ${ee.l}`},o))};var ne=({componentId:e})=>{const t=Object(r.c)(t=>s.i.getComponentQuillHTML(t,e));return t?n.default.createElement(oe,{html:t}):null},re=o("../forms/src/Client/Components/ResetElements/index.tsx");const ie=["children","actionId","formVersionCId"];var se=e=>{let{children:t,actionId:o,formVersionCId:i}=e,l=a()(e,ie);const[c,m]=Object(n.useState)(!1),u=Object(r.c)(e=>o?s.b.getAriaPropsFromFormAction(e,o):{});return t(Object.assign({onClick:o?()=>{if(o){const e=U({actionId:o,formVersionCId:i}),t=new e({actionId:o,formVersionCId:i});d.c.has(e.formActionType)&&m(!0),t.runAction().catch(()=>{m(!1);const e=document.querySelector(`.klaviyo-form-version-cid_${i} [aria-invalid="true"]`);e&&e.focus()})}}:void 0,handlingFormAction:c,ariaProps:u},l))};const le=()=>null;var ae=({formVersionCId:e,componentId:t})=>{const o=Object(r.c)(s.e.isDesignWorkflow),i=Object(r.c)(e=>s.i.getComponentStyling(e,t)),l=Object(r.c)(e=>s.i.getComponentImage(e,t)),a=Object(r.c)(e=>s.i.getComponentAltText(e,t)),d=Object(r.c)(e=>s.i.getComponentActionId(e,t)),c=d?re.d:re.e,m=i.width||100;return n.default.createElement(re.b,{style:{display:"flex",alignItems:"center",width:"100%",height:"auto"}},o&&!l?n.default.createElement(le,null):l&&n.default.createElement(se,{actionId:d,formVersionCId:e},({onClick:e,handlingFormAction:t,ariaProps:r})=>n.default.createElement(re.b,{className:t?"klaviyo-spinner":"",style:{position:"relative",display:"flex",alignItems:"center",width:"100%",height:"auto"},onClick:e},n.default.createElement(c,X()({style:{maxWidth:"100%",width:m,height:"auto",cursor:e?"pointer":"initial"},src:l.url,alt:a,tabIndex:o||!d?-1:0},r)))))},de=o("../../node_modules/lodash-es/uniqueId.js"),ce=o("../../node_modules/goober/dist/goober.esm.js"),me=o("../forms/src/Client/Components/ResetElements/CleaveInput.tsx"),ue=o("../forms/src/Client/Components/FormComponents/Label.tsx"),fe=o("../forms/src/Client/Components/FormComponents/ValidationMessage.tsx");let pe,be=e=>e;var ge=({formVersionCId:e,componentId:t,theme:o})=>{var i;const l=Object(r.c)(s.e.isDesignWorkflow),a=Object(r.c)(o=>s.u.getOpenFormVersionComponentInstance(o,e,t)),d=Object(r.c)(e=>s.i.getComponentLabel(e,t)),c=Object(r.c)(e=>s.i.getComponentPlaceholder(e,t)),m=Object(r.c)(e=>s.i.getComponentType(e,t)),u=Object(r.c)(e=>s.i.getComponentFormat(e,t)),f=Object(r.c)(e=>s.i.getComponentDelimiter(e,t)),p=Object(r.c)(e=>s.i.getComponentPrefill(e,t)),b=Object(r.b)(),{current:g}=Object(n.useRef)(Object(de.a)("klaviyo_ariaid_")),[y,I]=Object(n.useState)(!1),[C,v]=Object(n.useState)(!1),[x,S]=Object(n.useState)(),j=({value:o,validate:n,hasChangedSinceLastValidation:r})=>{var i;const l=void 0!==o?o:"";S(l),I(!1),v(!!r),b(s.u.validateOpenFormVersionComponent({formVersionCId:e,componentId:t,value:m===ee.c?null==(i=ee.e.find(({value:e})=>JSON.stringify(e)===JSON.stringify(u)))?void 0:i.convertValue(l,f):l,validate:n}))};Object(n.useEffect)(()=>{const e=Object(h.b)();if(p&&e&&m===ee.g&&!l){const{$email:t}=e;j({value:t,validate:!1})}},[]);const O=C||!1==!l||!a||void 0===a.valid||a.valid,w=m!==ee.c||c&&!y?c:null==(i=ee.e.find(({value:e})=>JSON.stringify(e)===JSON.stringify(u)))?void 0:i.label.replace(/ /g,f),E=m===ee.c?me.a:re.f;return n.default.createElement(re.b,{style:{display:"flex",flexGrow:1,flexDirection:"column",alignSelf:"flex-end"}},n.default.createElement(ue.a,{theme:o},d),n.default.createElement(E,{className:Object(ce.a)(pe||(pe=be`
&& {
          &&& {
            &::placeholder {
              color: ${0};
              font-family: ${0};
              font-size: ${0};
              font-weight: ${0};
              letter-spacing: ${0}px;
            }
            &::-moz-placeholder {
              line-height: ${0}px;
            }
            &:hover {
              border-color: ${0} !important;
            }
          }
        }
`),o.inputStyles.textStyles.placeholderColor,o.inputStyles.textStyles.fontFamily,o.inputStyles.textStyles.fontSize,o.inputStyles.textStyles.fontWeight,o.inputStyles.textStyles.letterSpacing,o.inputStyles.textStyles.height,o.inputStyles.border.activeColor),style:Object.assign({boxSizing:"border-box",borderRadius:2,paddingLeft:16,paddingRight:0,paddingTop:0,paddingBottom:0,height:o.inputStyles.textStyles.height,textAlign:"left",color:o.inputStyles.textStyles.formInputTextColor,fontFamily:o.inputStyles.textStyles.fontFamily,fontSize:o.inputStyles.textStyles.fontSize,fontWeight:o.inputStyles.textStyles.fontWeight,letterSpacing:o.inputStyles.textStyles.letterSpacing,backgroundColor:o.inputStyles.inputBackgroundColor,border:"1px solid",borderColor:o.inputStyles.border[O?"defaultColor":"errorColor"]},y?{borderColor:o.inputStyles.border[O?"activeColor":"errorColor"],boxShadow:"0 0 5px "+o.focusColor}:{}),type:(e=>{switch(e){case ee.g:return"email";case ee.k:return"tel";default:return"text"}})(m),name:m===ee.g?"email":void 0,tabIndex:l?-1:0,placeholder:w,"aria-label":(()=>{let e;return e=m===ee.c?"date":m===ee.g?"email":"text",d||c||e})(),"aria-invalid":!O,"aria-describedby":O?void 0:g,onBlur:e=>j({value:e.target.value,validate:!0,hasChangedSinceLastValidation:!1}),onChange:e=>j({value:e.target.value,validate:!1,hasChangedSinceLastValidation:!0}),onFocus:()=>I(!0),options:m===ee.c?{date:!0,datePattern:u,delimiter:f}:{delimiter:""},value:x||""}),!l&&!C&&n.default.createElement(fe.a,{theme:o,formVersionCId:e,componentAriaID:g,componentInstance:a}))},he=o("../forms/src/Constants/defaultTheme/button.ts");let ye,Ie=e=>e;const{THEME_KEY:Ce}=he.a;var ve=({componentId:e,formVersionCId:t,theme:o})=>{const i=Object(r.c)(t=>s.i.componentSelectById(t,e)),l=Object(r.c)(t=>s.i.getComponentActionId(t,e)),a=Object(r.c)(s.e.isDesignWorkflow),d=Object(ce.a)(ye||(ye=Ie`
&& {
    &&& {
      &:focus {
        box-shadow: 0 0 5px ${0};
      }
      ${0}
    }
  }
`),o.focusColor,!1!==o[Ce].specifyHoverBackgroundColor?`\n      &:hover {\n        background-color: ${o[Ce].hoverBackgroundColor} !important;\n        ${o[Ce].hoverTextColor||o[Ce].textColor?`color: ${o[Ce].hoverTextColor||o[Ce].textColor} !important;`:""}\n      }`:"");return n.default.createElement(se,{formVersionCId:t,actionId:l},({onClick:e,handlingFormAction:t})=>n.default.createElement(re.a,{className:t?"klaviyo-spinner "+d:d,style:Object.assign({background:o[Ce].backgroundColor,borderRadius:o[Ce].borderRadius,borderStyle:o[Ce].borderStyle,borderColor:o[Ce].borderColor,borderWidth:o[Ce].borderWidth,color:o[Ce].textStyles.color,fontFamily:o[Ce].textStyles.fontFamily,fontSize:o[Ce].textStyles.fontSize,fontWeight:o[Ce].textStyles.fontWeight,letterSpacing:o[Ce].textStyles.letterSpacing,lineHeight:1,whiteSpace:"normal",paddingTop:11,paddingBottom:11,textAlign:"center",wordBreak:"break-word",alignSelf:"flex-end",cursor:"pointer"},o[Ce].fullWidth?{width:"100%"}:{paddingLeft:10,paddingRight:10}),type:"button",onClick:e,tabIndex:a?-1:0},i.data.content))};const xe=["selectorType","fillColor","formVersionCId"],Se=({fillColor:e})=>n.default.createElement("g",{id:"checkboxInner",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},n.default.createElement("g",{id:"checkbox_on",transform:"translate(3.000000, 4.000000)",fill:"#303B43"},n.default.createElement("polygon",{id:"Shape",fill:e,points:"4.45454545 9.20149254 1.11363636 5.75373134 0 6.90298507 4.45454545 11.5 14 1.64925373 12.8863636 0.5"}))),je=({fillColor:e})=>n.default.createElement("g",{id:"radioInner",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},n.default.createElement("g",{id:"Group-17-Copy",transform:"translate(4.000000, 4.000000)",fill:"#303B43"},n.default.createElement("circle",{fill:e,id:"Oval-Copy",cx:"6",cy:"6",r:"5.55555556"})));var Oe=e=>{let{selectorType:t,fillColor:o}=e,r=a()(e,xe);return n.default.createElement("svg",X()({style:{cursor:"pointer",display:"none",position:"absolute",margin:0},width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},r),n.default.createElement("defs",null),"radio"===t?n.default.createElement(je,{fillColor:o}):n.default.createElement(Se,{fillColor:o}))};let we,Ee=e=>e;const ke=["selectorType","valid","theme","formVersionCId"],Te=({backgroundColor:e})=>n.default.createElement("g",null,n.default.createElement("g",null,n.default.createElement("rect",{strokeWidth:"1",x:"0.5",y:"0.5",width:"19",height:"19",rx:"2.22222222",fill:e}))),Ve=({backgroundColor:e})=>n.default.createElement("g",null,n.default.createElement("g",null,n.default.createElement("circle",{strokeWidth:"1",cx:"10",cy:"10",r:"9.5",fill:e})));var _e=e=>{let{selectorType:t,valid:o,theme:r}=e,i=a()(e,ke);return n.default.createElement("svg",X()({className:Object(ce.a)(we||(we=Ee`
&& {
        &&& {
          input:focus + label + label > * {
            filter: drop-shadow(0px 0px 2px ${0});
            stroke: ${0};
          }
        }
      }
`),r.focusColor,r.inputStyles.border.activeColor),style:{stroke:o?r.inputStyles.border.defaultColor:r.inputStyles.border.errorColor,marginRight:8,minWidth:20,width:"auto",height:"auto"},width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},i),"radio"===t?n.default.createElement(Ve,{backgroundColor:r.inputStyles.inputBackgroundColor}):n.default.createElement(Te,{backgroundColor:r.inputStyles.inputBackgroundColor}))};var Fe=({name:e,label:t,isValid:o,componentAriaID:r,componentType:i,onChange:s,tabIndex:l,theme:a,formVersionCId:d})=>{const{current:c}=Object(n.useRef)(Object(de.a)(e+"__")),m=i===ee.m?"radio":"checkbox";return n.default.createElement(n.default.Fragment,null,n.default.createElement(re.f,{style:{position:"absolute",width:0,opacity:0},tabIndex:l,type:m,id:c,name:e,onChange:s,"aria-invalid":!o,"aria-label":t,"aria-describedby":r}),n.default.createElement(re.g,{style:{display:"flex",alignItems:"center",flex:a.inputStyles.arrangement===ee.a?" 1 0 100%":" 0 0 auto",paddingBottom:8,wordBreak:"break-word",maxWidth:"100%",cursor:"pointer"},htmlFor:c},n.default.createElement(_e,{valid:o,selectorType:m,"aria-hidden":"true",theme:a,formVersionCId:d}),n.default.createElement(Oe,{selectorType:m,"aria-hidden":"true",formVersionCId:d,fillColor:a.inputStyles.textStyles.formInputTextColor}),n.default.createElement(re.b,{style:{cursor:"pointer",color:a.inputStyles.textStyles.color,fontFamily:a.inputStyles.textStyles.fontFamily,fontSize:a.inputStyles.textStyles.fontSize,fontWeight:a.inputStyles.textStyles.fontWeight,letterSpacing:a.inputStyles.textStyles.letterSpacing,marginRight:24,display:"flex",position:"relative",top:1}},t)))};let Ae,$e=e=>e;const De=["selected","id","label"],Ne=({options:e,componentType:t,toggledOptionIndex:o})=>e.reduce((e,n,r)=>{let{selected:i,id:s,label:l}=n,d=a()(n,De),c=t!==ee.m&&i;return o===r&&(c=!c),e.push(Object.assign({selected:c,label:l,id:s||Object(de.a)(l+"__")},d)),e},[]);var Re=({formVersionCId:e,componentId:t,theme:o})=>{const i=Object(r.c)(s.e.isDesignWorkflow),l=Object(r.c)(o=>s.u.getOpenFormVersionComponentInstance(o,e,t)),a=Object(r.c)(e=>s.i.getComponentType(e,t)),d=Object(r.c)(e=>s.i.getComponentDropdownOptions(e,t)),c=Object(r.c)(e=>s.i.getComponentFieldId(e,t)),m=Object(r.c)(e=>s.i.getComponentLabel(e,t)),u=Object(r.b)(),[f,p]=Object(n.useState)([]);Object(n.useEffect)(()=>{p(Ne({options:d,componentType:a}))},[d]);const{inputName:b,labelId:g}=Object(n.useMemo)(()=>{const e=Object(de.a)(c+"__");return{inputName:e,labelId:`kl_${e}_label`}},[]),h=i||!l||void 0===l.valid||l.valid;return n.default.createElement(re.b,{className:Object(ce.a)(Ae||(Ae=$e`
&& {
        &&& {
          input:focus + label > svg circle,
          input:focus + label > svg rect {
            stroke: ${0};
          }
        }
      }
`),o.inputStyles.border.activeColor),style:Object.assign({alignSelf:"flex-end"},o.inputStyles.arrangement===ee.a?{display:"block"}:{flexDirection:"column",flexWrap:"wrap"})},n.default.createElement(ue.a,{id:g,theme:o,style:{marginRight:8,marginBottom:8}},m),n.default.createElement(re.b,{style:Object.assign({},o.inputStyles.arrangement===ee.a?{display:"block"}:{display:"inline-flex",justifyContent:"flex-start",flexWrap:"wrap"}),role:a===ee.m?"radiogroup":"group","aria-labelledby":g},f.map(({label:r,id:l},d)=>n.default.createElement(Fe,{key:l,formVersionCId:e,theme:o,name:b,label:r,isValid:h,componentType:a,componentAriaID:g,onChange:()=>(o=>{const n=Ne({options:f,componentType:a,toggledOptionIndex:o});p(n);const r=(e=>e.filter(({selected:e})=>e).map(e=>e.value||e.label))(n);u(s.u.validateOpenFormVersionComponent({formVersionCId:e,componentId:t,value:a===ee.m?r.toString():r}))})(d),tabIndex:i?-1:0}))),!i&&n.default.createElement(fe.a,{theme:o,formVersionCId:e,componentAriaID:g,componentInstance:l}))};var Me=(e,t=(()=>n.default.createElement(n.default.Fragment,null)))=>{function o(o){const[r,i]=n.default.useState(0),s=n.default.useCallback(()=>i(e=>e<5?e+1:e),[]),l=n.default.useMemo(()=>n.default.lazy(()=>e().catch(()=>({default:()=>(s(),n.default.createElement(n.default.Fragment,null))}))),[e,r]);return n.default.createElement(n.default.Suspense,{fallback:n.default.createElement(t,null)},n.default.createElement(l,o))}return o.displayName="LazyLoader",o};const We=ne,Be={[ee.h]:ae,[ee.p]:We,[ee.q]:ge,[ee.g]:ge,[ee.k]:Me(()=>Promise.all([o.e(3),o.e(14),o.e(6)]).then(o.bind(null,"../forms/src/Client/Components/FormComponents/PhoneNumberInput/index.ts"))),[ee.b]:ve,[ee.j]:Re,[ee.m]:Re,[ee.c]:ge,[ee.f]:Me(()=>Promise.all([o.e(3),o.e(5)]).then(o.bind(null,"../forms/src/Client/Components/FormComponents/Dropdown/index.ts")))},He=({children:e})=>e,Pe={outer:{right:"0 0 0 auto",left:"0 auto 0 0",center:"0 auto"},inner:{right:"flex-end",left:"flex-start",center:"center"}};var Le=({componentId:e,componentPosition:t,formVersionCId:o,rowDroppableHover:i,setDragState:l,dragFinished:a})=>{const[d,c]=Object(n.useState)(!1),m=Object(n.useRef)(null),u=Object(r.b)(),f=Object(r.c)(t=>s.i.componentSelectById(t,e),(e,t)=>JSON.stringify(e)===JSON.stringify(t)),p=Object(r.c)(s.e.isDesignWorkflow),b=Object(r.c)(s.n.getActiveComponentId),{currentViewId:g}=Object(r.c)(e=>s.u.openFormVersionSelectById(e,o)),h=Object(r.c)(t=>s.i.getComponentTheme(t,e,g),(e,t)=>JSON.stringify(e)===JSON.stringify(t)),y=Object(r.c)(e=>s.B.getViewTheme(e,g)),I=Object(n.useMemo)(()=>Object(Q.a)({},y,h,{[Z.a.THEME_KEY]:f.data.styling}),[y,h,f.data.styling]),C=Be[f.componentType],v=b===f.componentId,x=Object.assign({component:f},p?{onClick:()=>{u(s.n.slice.actions.setActiveSidebar({type:K.b,key:e}))},onMouseOver:()=>{a?l(!1):c(!0)},onMouseLeave:()=>c(!1),onDragStart:()=>c(!1),onDragEnd:()=>{l(!0)},ref:m}:{});return n.default.createElement(re.b,X()({style:Object.assign({display:"flex",justifyContent:Pe.inner[f.data.styling.innerAlignment]||"flex-start",padding:`${I[Z.a.THEME_KEY].padding.top||0}px ${I[Z.a.THEME_KEY].padding.right||0}px ${I[Z.a.THEME_KEY].padding.bottom||0}px ${I[Z.a.THEME_KEY].padding.left||0}px`,position:"relative"},I[Z.a.THEME_KEY].blockBackgroundColor?{backgroundColor:I[Z.a.THEME_KEY].blockBackgroundColor}:{},d?{cursor:"pointer"}:{},{flex:!1!==f.data.styling.fullWidth?"1 0 0":"0 1 auto"},!1===f.data.styling.fullWidth&&f.data.styling.alignment?{margin:Pe.outer[f.data.styling.alignment]}:{})},x,{"data-testid":"form-component",className:"notranslate"}),p?n.default.createElement(He,{theme:I,active:v,componentId:e,componentPosition:t,componentRef:m.current,formVersionCId:o,isHovering:d,rowDroppableHover:i,setIsHovering:c},n.default.createElement(C,{theme:I,componentId:e,formVersionCId:o})):n.default.createElement(C,{theme:I,componentId:e,formVersionCId:o}))};var ze=({rowId:e,formVersionCId:t})=>{const o=Object(r.c)(t=>s.w.getRowComponentIds(t,e)),[i,l]=Object(n.useState)(!1),[a,d]=Object(n.useState)(!1),[c,m]=Object(n.useState)(!1),u=(i?"top":a&&"bottom")||!1;return o.length?n.default.createElement(re.b,{"data-testid":"form-row",style:Object.assign({display:"flex",flexDirection:"row",alignItems:"stretch",position:"relative"},u?Object.assign({},"bottom"===u?{borderBottom:"2px",borderBottomStyle:"solid",borderBottomColor:"#2B98D3",marginBottom:"-2px"}:{borderTop:"2px",borderTopStyle:"solid",borderTopColor:"#2B98D3",marginTop:"-2px"}):{})},o.map((e,o)=>n.default.createElement(Le,{key:e,componentId:e,componentPosition:o,formVersionCId:t,rowDroppableHover:(e,t)=>{"top"===e?l(t):d(t)},setDragState:e=>m(e),dragFinished:c})),null):null},qe=o("../forms/src/Utils/isMobile.ts");const Ue=({children:e})=>e;var Ke=({columnId:e,formVersionCId:t,formVersionId:o,viewId:i,sideImageExistsAndHidden:l})=>{var a,d,c,m,u,f,p,b;const g=Object(r.b)(),h=Object(n.useRef)(null),[y,I]=Object(n.useState)(!1),C=Object(r.c)(s.e.isDesignWorkflow),v=Object(r.c)(e=>s.q.getFormVersionSideImage(e,o)),x=Object(r.c)(t=>s.g.getColumnRowIds(t,e)),S=Object(r.c)(t=>s.g.columnSelectById(t,e)),j=Object(r.c)(e=>s.B.getViewTheme(e,i)),O=Object(r.c)(e=>s.n.getActiveColumnId(e)),{padding:w,minimumHeight:E}=j,k=void 0!==(null==(a=S.data)||null==(d=a.styling)?void 0:d.sizeMultiplier)&&0===S.rows.length,{columnMargin:T,columnPadding:V}=((e,t,o,n)=>{const r={top:0,left:0,right:0,bottom:0},i={top:0,left:0,right:0,bottom:0};return n||void 0!==o&&(e?(r.top=t&&t.top?-1*t.top:0,r.bottom=t&&t.bottom?-1*t.bottom:0,0===o?r.left=t&&t.left?-1*t.left:0:1===o&&(r.right=t&&t.right?-1*t.right:0)):0===o?i.left=(null==t?void 0:t.left)||0:1===o&&(i.right=(null==t?void 0:t.right)||0)),{columnMargin:r,columnPadding:i}})(k,w,null==v?void 0:v.position,l),_=null==S||null==(c=S.data)||null==(m=c.styling)?void 0:m.sizeMultiplier,F=null==j?void 0:j.size,A=_&&F?((e,t,o)=>{const n=e/(e+1)*t;return o?n:t-n})(_,F,k):0,$=O===S.columnId,D=(null==j?void 0:j.borderStyle)&&"none"!==(null==j?void 0:j.borderStyle)&&(null==j?void 0:j.borderWidth)||0,N=null==S||null==(u=S.data)||null==(f=u.styling)?void 0:f.backgroundImage,R=null==S||null==(p=S.data)||null==(b=p.styling)?void 0:b.backgroundColor,M=Object.assign({},C&&k?{onClick:()=>{g(s.n.slice.actions.setActiveSidebar({type:K.a,key:e}))},onMouseOver:()=>{I(!0)},onMouseLeave:()=>I(!1),ref:h}:{}),W=Object(r.c)(e=>s.n.getMobileDesktopType(e))===K.e;return((e,t,o,n)=>{var r,i,s,l,a;const d=(null==(r=e.rows)?void 0:r.length)>0,c=(null==e||null==(i=e.data)||null==(s=i.styling)?void 0:s.backgroundImage)||(null==e||null==(l=e.data)||null==(a=l.styling)?void 0:a.backgroundColor);return!!d||(o?!n||t:!!c&&(!Object(qe.a)()||t))})(S,(null==v?void 0:v.displayOnMobile)||!1,C,W)?n.default.createElement(n.default.Fragment,null,n.default.createElement(re.b,X()({style:Object.assign({display:"flex",flexDirection:"column",width:A?A+"px":"100%",marginTop:T.top+"px",marginBottom:T.bottom+"px",marginLeft:T.left+"px",marginRight:T.right+"px",paddingTop:V.top+"px",paddingBottom:V.bottom+"px",paddingLeft:V.left+"px",paddingRight:V.right+"px",backgroundColor:R},y?{cursor:"pointer"}:{},A?{minWidth:A+"px"}:{},N?{backgroundImage:`url(${N.url})`,backgroundRepeat:"no-repeat",backgroundSize:"custom"===N.position?N.customWidth+"px":N.position,backgroundPositionX:N.alignment,backgroundPositionY:N.verticalAlignment||"center"}:{},void 0!==E?{minHeight:E+"px"}:{},k?{}:{justifyContent:"center"})},null!=N&&N.altText?{title:null==N?void 0:N.altText}:{},M),n.default.createElement(Ue,{backgroundColorExists:!!R,backgroundImageExists:!!N,calculatedWidth:A,column:S,isDesignWorkflow:C,isHovering:y,isSelected:$,isSideImageColumn:k,viewBorderWidth:D,viewSize:F},null==x?void 0:x.map(e=>n.default.createElement(ze,{key:e,rowId:e,formVersionCId:t}))))):null},Je=o("../forms/src/Utils/calculateSideImageSize.ts");const Ye={left:{float:"left"},center:{margin:"0 auto"},right:{float:"right"}},Ge=(e,t,o)=>t?null!=o&&o.includes("BOTTOM")?`${e}px ${e}px 0 0`:`0 0 ${e}px ${e}px`:e+"px";var Xe=({viewId:e,isEmbed:t,formVersionId:o,formVersionCId:i,isDocked:l,formTypeDirection:a})=>{var d,c,m;const u=Object(r.c)(e=>s.q.formVersionSelectById(e,o)),f=Object(r.c)(t=>s.B.getViewColumnIds(t,e)),p=Object(r.c)(e=>s.g.columnSelectAll(e)).filter(e=>f.includes(e.columnId)).sort((e,t)=>e.position-t.position),b=Object(r.c)(t=>s.i.getSubmitFormActionsFromView(t,e)),g=Object(r.c)(t=>s.B.getViewTheme(t,e)),h=Object(r.c)(e=>s.q.getFormVersionSideImage(e,o)),y=null==h||null==(d=h.data)||null==(c=d.styling)?void 0:c.sizeMultiplier,I=y?Object(Je.a)(y,g.size):0,C=Object(r.c)(t=>s.g.getViewColumns(t,e)).find(e=>e.position===(null==h?void 0:h.position)),v=Object(r.c)(s.e.isDesignWorkflow),x=Object(r.c)(e=>s.n.getMobileDesktopType(e))===K.e,S=((e,t,o,n,r)=>{var i,s,l,a;const d=!o&&(Object(qe.a)()&&!t||t&&r),c=!t&&e&&!(null!=n&&null!=(i=n.data)&&null!=(s=i.styling)&&s.backgroundImage||null!=n&&null!=(l=n.data)&&null!=(a=l.styling)&&a.backgroundColor);return d||c})(!!h,v,null==h?void 0:h.displayOnMobile,C,x),j=S?g.size-I:void 0,O=Object(n.useRef)(null);return Object(n.useEffect)(()=>{const e=O.current;u.formType===J.f&&e&&e.focus()},[O]),n.default.createElement(re.c,{style:Object.assign({display:"flex",flexDirection:"row",boxSizing:"border-box"},t?Object.assign({width:"100%",overflow:"visible"},g.isMaxWidth?{maxWidth:g.size+"px"}:{},g.embedAlignment?Ye[g.embedAlignment]:{}):{overflow:"hidden",width:(j||g.size)+"px",minWidth:Y.b+"px",maxWidth:Y.a+"px"},{borderRadius:""+Ge(g.borderRadius,l,a),borderStyle:g.borderStyle,borderWidth:(g.borderWidth||0)+"px",borderColor:g.borderColor,backgroundColor:g.backgroundColor,backgroundImage:g.backgroundImage&&`url(${g.backgroundImage.url})`,backgroundRepeat:"no-repeat",backgroundSize:g.backgroundImage&&("custom"===g.backgroundImage.position?g.backgroundImage.customWidth+"px":g.backgroundImage.position),backgroundPositionX:g.backgroundImage&&g.backgroundImage.alignment,backgroundPositionY:(null==(m=g.backgroundImage)?void 0:m.verticalAlignment)||"center",paddingTop:g.padding.top+"px",paddingRight:g.padding.right+"px",paddingBottom:g.padding.bottom+"px",paddingLeft:g.padding.left+"px"}),className:"klaviyo-form klaviyo-form-version-cid_"+i,"data-testid":"klaviyo-form-"+u.formId,noValidate:!0,ref:O,tabIndex:-1,onSubmit:async e=>{if(e.preventDefault(),1!==b.length)return!1;const{actionId:t}=b[0],o=U({actionId:t,formVersionCId:i});return await new o({actionId:t,formVersionCId:i}).runAction(),!0}},p.map(t=>n.default.createElement(Ke,{key:t.columnId,columnId:t.columnId,formVersionCId:i,formVersionId:o,viewId:e,sideImageExistsAndHidden:S})),n.default.createElement("input",{style:{display:"none"},type:"submit",tabIndex:-1,value:"Submit"}))};t.a=Xe},"../forms/src/Client/Render.tsx":function(e,t,o){"use strict";o.r(t);var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),i=o("../../node_modules/preact/dist/preact.module.js"),s=o("../../node_modules/goober/dist/goober.esm.js"),l=o("../forms/src/ClientStore/store.ts"),a=o("../../node_modules/@babel/runtime/helpers/extends.js"),d=o.n(a),c=o("../../node_modules/react-portal/es/PortalWithState.js");var m=o("../forms/src/Client/Components/Modal/Modal.tsx").default,u=o("../forms/src/ClientStore/index.ts");var f=({formVersionCId:e,node:t})=>{const o=Object(r.b)(),i=Object(r.c)(u.e.isDesignWorkflow);return i&&null===t?null:n.default.createElement(c.a,{key:e,defaultOpen:!0,onClose:()=>o(u.u.closeForm({formVersionCId:e})),closeOnEsc:!i,node:i?t:void 0},({closePortal:t,portal:o})=>[o(n.default.createElement(m,{formVersionCId:e,closePortal:i?()=>{}:t}))])},p=o("../forms/src/Client/Components/View/index.ts"),b=o("../forms/src/Client/Components/View/Canned/ErrorView.tsx"),g=o("../forms/src/Client/Components/ResetElements/index.tsx");var h=({node:e,formVersionCId:t})=>{const o=Object(r.c)(e=>u.u.openFormVersionSelectById(e,t)),i=e||document.querySelector(`div.klaviyo-form-${o.formId}.form-version-cid-${t}`);return i?Object(n.createPortal)(o.currentViewId?n.default.createElement(n.default.Fragment,null,o.showErrorView?n.default.createElement(b.a,{isEmbed:!0}):n.default.createElement(g.b,{style:{transform:"translate(0, 0)"}},n.default.createElement(p.a,{formVersionCId:t,formVersionId:o.formVersionId,viewId:o.currentViewId,isEmbed:!0,key:t}))):null,i):null};var y=()=>{const e=Object(r.c)(u.u.openFormVersionSelectIds),t=Object(r.c)(u.u.getOpenEmbedFormVersionIds);return n.default.createElement(n.Suspense,{fallback:n.default.createElement("div",null)},e.map(e=>{const o={formVersionCId:e};return t.includes(e)?n.default.createElement(h,d()({key:e},o)):n.default.createElement(f,d()({key:e},o))}))};Object(s.b)(i.g);t.default=()=>{const e=document.createElement("div");e.setAttribute("id","dynamic-react-root"),document.body.appendChild(e),Object(n.render)(n.default.createElement(r.a,{store:l.a},n.default.createElement(y,null)),e)}},"../forms/src/Constants/views.ts":function(e,t,o){"use strict";o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return r}));const n=1e3,r=200},"../forms/src/Utils/calculateSideImageSize.ts":function(e,t,o){"use strict";t.a=(e,t)=>e/(e+1)*t}}]);
